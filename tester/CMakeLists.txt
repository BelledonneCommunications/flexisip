set(SOURCE_FILES_CXX 	tester.cc tester.hh
	boolean-expressions.cc
)

if(ENABLE_REGEVENT)
	list(APPEND SOURCE_FILES_CXX
		registration-event-tester.cc
	)
endif()

set(FLEXISIP_INCLUDEDIRS)

list(APPEND FLEXISIP_INCLUDEDIRS ${BCTOOLBOX_INCLUDE_DIRS} ${BELR_INCLUDE_DIRS})

bc_apply_compile_flags(SOURCE_FILES_CXX CPP_BUILD_FLAGS CXX_BUILD_FLAGS)

add_executable(flexisip_tester ${SOURCE_FILES_CXX})

target_include_directories(flexisip_tester PUBLIC ${FLEXISIP_INCLUDEDIRS})
target_link_libraries(flexisip_tester flexisip bctoolbox-tester)

install(TARGETS flexisip_tester
	RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}
	LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
	ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR}
	PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
)
